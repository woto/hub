<div class="nav-item dropdown">
  <%= link_to '#', class: "#{@capybara_browser} capybara-authenticated nav-link d-flex lh-1 text-reset p-0",
                   data: { toggle: 'dropdown' } do %>
    <%= render AvatarComponent.new(avatar: helpers.current_user.avatar) %>

    <div class="d-none d-xl-block pl-2">
      <div><%= helpers.current_user.profile&.name %></div>
      <div class="mt-1 small text-muted">#<%= helpers.current_user.id %></div>
    </div>
  <% end %>

  <div class="dropdown-menu dropdown-menu-right">
    <%= render Header::Profile::Authenticated::SettingsComponent.new %>
    <%= render Header::Profile::Authenticated::LogoutComponent.new %>
    <% if @current_user != @true_user %>
      <%= link_to(stop_impersonating_users_path, method: :post, class: 'dropdown-item', id: 'logout') do %>
        <%# TODO dropdown-item-icon %>
        <%#= GlobalHelper.icons['logout'] %>
        <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"></path><path d="M7 12h14l-3 -3m0 6l3 -3"></path></svg>
        You (<%= @true_user.id %>) are signed in as <%= @current_user.id %>
      <% end %>
    <% end %>
  </div>
</div>
