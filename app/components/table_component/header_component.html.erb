<%= tag.div class: 'tw-rounded-md 2xl:tw-rounded-none tw-bg-slate-100 tw-inline-block tw-m-1 2xl:tw-m-0 2xl:tw-table-cell tw-align-middle tw-p-2 2xl:tw-border-b 2xl:tw-bg-slate-100 text-nowrap',
           'data-controller': 'table-modal-filter',
           'data-table-modal-filter-url-value': (
             polymorphic_path([:table, :filters])
           ),
           'data-table-modal-filter-form-data-value': {
             model: params[:controller].split('/').last,
             state: controller.send(:workspace_params).to_json,
             column: @col_name
           }.to_json do %>

  <%= tag.div 'data-table-modal-filter-target': 'modalPlaceholder' %>

  <% active_class = (request.params.fetch('filters', {})).key?(@col_name) ? 'btn-primary' : 'btn-ghost-primary'  %>

  <%= link_to '#', class: "btn btn-sm #{active_class}",
              'data-action': 'click->table-modal-filter#openTableModalFilter' do %>
    <%= tag.span **@params do %>
      <%= t(@col_name, scope: [:table, :short, @settings[:singular]]) %>
    <% end %>
  <% end %>

  <% if @sort %>

    <% sorted = @sort == params[:sort] %>

    <% if sorted %>
      <% btn_color = 'btn-primary color-primary' %>
    <% else %>
      <% btn_color = 'btn-primary btn-ghost-primary color-primary' %>
    <% end %>

    <%= link_to url_for(
                    **controller.send(:workspace_params),
                    sort: @sort,
                    order: params[:order] == 'desc' && sorted ? 'asc' : 'desc',
                    page: 1,
        ),
        id: "sort_#{@sort}",
        class: "ms-2 btn btn-sm #{btn_color} btn-icon",
        rel: [Seo::NoFollow] do %>
      <% if params[:order] == 'desc' && sorted %>
        <i class="fas fa-arrow-down fa-sm py-1"></i>
      <% elsif sorted %>
        <i class="fas fa-arrow-up fa-sm py-1"></i>
      <% else %>
        <i class="fas fa-angle-down fa-sm py-1"></i>
      <% end %>
    <% end %>
  <% end %>

<% end %>
