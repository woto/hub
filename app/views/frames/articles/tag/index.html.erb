<%= turbo_frame_tag 'articles-by-tag' do %>
  <div class="tw-bg-fuchsia-300">
  <%= tag.div class: 'overflow-auto max-height-450' do %>
    <%= tag.div class: 'list-group bg-white' do %>
      <% @result['aggregations']['group_by_tag']['buckets'].select { |bucket| bucket['key'].present? } .each do |item| %>

        <% link_value = item['key'] %>
        <% active_css = 'active' if link_value == @tag %>

        <%= link_to articles_by_tag_link(link_value),
                    test_class => 'link',
                    'data-turbo-frame': '_top',
                    class: "list-group-item d-flex list-group-item-action justify-content-between align-items-center #{active_css}" do %>
          <%= link_value %>
          <%= tag.span test_class => 'badge', class: 'badge badge-primary badge-pill' do %>
            <%= item['doc_count'] %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
  </div>
<% end %>
