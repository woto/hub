<%= turbo_frame_tag 'news-by-tag' do %>
  <%= tag.div class: 'overflow-auto', style: 'max-height: 300px' do %>
    <%= tag.div class: 'list-group bg-white' do %>
      <% @result['aggregations']['group_by_tag']['buckets'].select { |bucket| bucket['key'].present? } .each do |item| %>

        <% link_value = item['key'] %>
        <% active_css = 'active' if link_value == @tag %>

        <%= link_to request.params.except(:month, :q, :id, :page).merge(controller: '/tables/news', action: :by_tag, tag: link_value),
                    test_class => 'link',
                    'data-turbo-frame': '_top',
                    class: "list-group-item d-flex list-group-item-action justify-content-between align-items-center #{active_css}" do %>
          <%= link_value %>
          <%= tag.span test_class => 'badge', class: 'badge badge-primary badge-pill' do %>
            <%= item['doc_count'] %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
