<%= tag.div data: { controller: "profile-messengers"} do %>

  <template data-target="profile-messengers.newMessengerTemplate">
    <%= builder.fields_for :messengers,
                           ProfileForm::Messenger.new({type: Rails.application.config.global[:blank_messenger][:long]}),
                           child_index: 'TEMPLATE' do |f| %>
      <%= render 'inputs/profiles/messenger', f: f %>
    <% end %>
  </template>

  <%= builder.fields_for :messengers do |f| %>
    <%= render 'inputs/profiles/messenger', f: f %>
  <% end %>

  <div data-target="profile-messengers.newMessengerPlaceholder"></div>

  <%= builder.error :messengers %>

  <button class="btn btn-sm btn-success" type="button" data-action="profile-messengers#addMessenger">
    <%== GlobalHelper.icons['plus'] %>
    <%= t('.add_messenger') %>
  </button>

<% end %>
