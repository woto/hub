<% content_for :modal_title do %>
  <%= t('.entities') %>
<% end %>

<% content_for :modal_body do %>

  <%= form_with url: new_mentions_entity_url, method: :get do |f| %>
    <label for="title" class="form-label"><%= t('search_entity_title') %></label>

    <div class="input-icon">
      <%= f.text_field 'title',
                       class: 'form-control',
                       'data-action': "mention-new-entity#searchEntity",
                       'data-mention-new-entity-target': 'searchString',
                       'data-mention-new-entity-search-path-param': search_mentions_entities_path(form_id: params[:form_id]) %>

      <%= tag.span 'data-mention-new-entity-target': 'spinner', class: 'input-icon-addon d-none' do %>
        <div class="spinner-border spinner-border-sm text-muted" role="status"></div>
      <% end %>
    </div>

    <div class="form-text mb-3">
      <%= t('search_entity_hint') %>
    </div>

    <%= f.hidden_field :form_id, value: params[:form_id] %>

    <%= f.button t('.follow_to_creation'),
                 class: 'd-none btn btn-primary',
                 'data-mention-new-entity-target': 'followToCreation' %>
  <% end %>

  <%= tag.div class: 'mt-3', 'data-mention-new-entity-target': "entitiesSearchResult" %>

<% end %>

<% if false %>
  <% content_for :modal_footer do %>
  <% end %>
<% end %>

<%= render template: 'mentions/entities/modal_wrapper' %>
