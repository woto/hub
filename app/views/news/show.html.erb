<% content_for :title do %>
  <%= t("news", scope: ['titles']) %>
<% end %>

<% content_for :breadcrumbs do %>
  <li class="breadcrumb-item">
    <%= link_to t('breadcrumbs.homepage'), root_path %>
  </li>
  <li class="breadcrumb-item">
    <%= link_to t('breadcrumbs.dashboard'), dashboard_path %>
  </li>
  <li class="breadcrumb-item">
    <%= link_to t('breadcrumbs.news'), news_index_path %>
  </li>
  <li class="breadcrumb-item active">
    <%= link_to @news.title, news_path(id: @news.id) %>
  </li>
<% end %>

<div class="col">
  <div class="row">

    <div class="col-md-8 col-lg-9">
      <div class="card card-md mb-3">
        <div class="card-body">

          <div class="d-flex align-items-center mb-4">
            <h2>
              <%== @news.title %>
            </h2>

            <span class="ms-auto text-muted news-date"><%== l @news.published_at.to_date %></span>
          </div>

          <div class="fs-6 lh-lg news-content">
            <%==  @news.body %>
          </div>

          <div class="d-flex mt-5 align-items-start flex-column flex-sm-row gap-4">
            <%= link_to t('back_to_news'), news_index_path, class: 'order-2 order-sm-1 btn btn-pink' %>

            <% if false %>
            <% if policy(:news).edit? %>
              <%= link_to edit_post_path(id: @news.id), class: 'btn btn-icon btn-sm btn-pink ms-2 me-5' do %>
                <%== GlobalHelper.icon('pencil') %>
              <% end %>
            <% end %>
            <% end %>

            <div class="order-1 order-sm-2 d-flex justify-content-sm-end flex-wrap gap-1 ms-sm-auto">

              <% @news.tags.each do |item| %>
                <% next if item.blank? %>

                <%= link_to item, by_tag_news_index_path(item), class: 'badge badge-primary' %>
              <% end %>

            </div>

          </div>

        </div>
      </div>
    </div>
    <div class="col-md-4 col-lg-3">

      <%= turbo_frame_tag 'news-by-month', src: frames_news_month_path(request.params.slice(*Tables::NewsController::ALLOWED_PARAMS).merge(month: params[:month])) %>

      <div class="my-3"></div>

      <%= turbo_frame_tag 'news-by-tag', src: frames_news_tag_path(request.params.slice(*Tables::NewsController::ALLOWED_PARAMS).merge(tag: params[:tag])) %>

    </div>
  </div>
</div>
