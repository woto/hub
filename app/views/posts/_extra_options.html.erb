<%= render AccordionComponent.new(accordion_id: 'extra-options-accordion', css_class: 'bg-white') do |accordion_component| %>

    <% f.object.exchange_rate.extra_options.sort { |obj| -obj['priority'] }.each do |extra_option| %>

      <%= accordion_component.item(item_id: "extra-options-#{extra_option['key']}") do |item_component| %>

        <%= f.simple_fields_for :extra_options do |extra| %>

          <%= item_component.header do %>
            <%= t(extra_option['key'], scope: %w[simple_form labels post extra_options]) %>
          <% end %>

          <%= item_component.body(css_class: 'pt-0') do %>

            <% collection = extra_option['values'].pluck('title').map { |a|
              [t(a, scope: ['posts', 'extra_options', 'labels', extra_option['key']]), a]
            } %>

            <%= extra.input extra_option['key'],
                            as: extra_option['type'],
                            hint: t(extra_option['hint'], scope: %w[posts extra_options hints]),
                            checked: f.object.extra_options&.dig(extra_option['key']),
                            item_wrapper_class: 'form-check',
                            collection: collection,
                            required: false,
                            disabled: disabled || extra_option['disabled'],
                            label_text: false %>
          <% end %>
        <% end %>
      <% end %>
  <% end %>
<% end %>

<small class="d-inline-block mt-3 text-muted"><%= t('.extra_options_hint') %></small>
