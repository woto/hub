<% content_for :title do %>
  <%= t(@settings[:plural], scope: ['titles']) %>
<% end %>

<% content_for :breadcrumbs do %>
  <li class="breadcrumb-item">
    <%= link_to t('breadcrumbs.homepage'), root_path %>
  </li>
  <li class="breadcrumb-item">
    <%= link_to t('breadcrumbs.dashboard'), dashboard_path %>
  </li>
  <li class="breadcrumb-item active">
    <%= link_to t('breadcrumbs.news'), news_index_path %>
  </li>
<% end %>

<div class="col">
  <div class="row">

    <div class="col-md-8 col-lg-9">

      <%= render 'items_summary', rows: rows %>
      <div class="mb-3"></div>

      <% rows.each do |row| %>
        <div class="card card-md mb-3">
          <div class="card-body">


            <div class="d-flex align-items-center mb-4">

              <h2>

                <%= link_to news_path(id: row.id) do %>
                  <%== row.title %>
                <% end %>

              </h2>

              <span class="ms-auto text-muted">
                <%= l Time.zone.parse(row.published_at).to_date %>
              </span>

            </div>

            <div class="fs-6 lh-lg news-preview">
              <%== row.intro %>
            </div>

            <div class="d-flex mt-5 align-items-start flex-column flex-sm-row gap-4">
              <%= link_to t(:continue_reading), news_path(id: row.id), class: 'order-2 order-sm-1 btn btn-pink' %>

              <div class="order-1 order-sm-2 d-flex justify-content-sm-end flex-wrap gap-1 ms-sm-auto">

                <% row.tags.each do |item| %>
                  <% next if item.blank? %>

                  <%= link_to item, by_tag_news_index_path(item), class: 'badge badge-primary' %>
                <% end %>

              </div>
            </div>

          </div>
        </div>
      <% end %>

    </div>

    <div class="col-md-4 col-lg-3">

      <%= turbo_frame_tag 'news-by-month', src: frames_news_month_path(request.params.slice(*Tables::NewsController::ALLOWED_PARAMS).merge(month: params[:month])) %>

      <div class="my-3"></div>

      <%= turbo_frame_tag 'news-by-tag', src: frames_news_tag_path(request.params.slice(*Tables::NewsController::ALLOWED_PARAMS).merge(tag: params[:tag])) %>

    </div>
  </div>
</div>

<%= render 'table_footer', rows: rows %>
